(this.webpackJsonpwordful=this.webpackJsonpwordful||[]).push([[0],{13:function(e,t,n){e.exports=n.p+"static/media/avatar-icon.782adc2b.png"},14:function(e,t,n){e.exports=n(27)},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),c=n.n(i),o=n(1),l=n(2),s=n(5),u=n(7),d=function(){return r.a.createElement("div",{id:"google-oauth"})},f=Object(l.a)({profileContainer:{display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},profileImage:{borderRadius:"50%",height:55,marginRight:10},profileInfo:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",padding:10},userName:{fontSize:18},email:{fontSize:13,fontWeight:"lighter"}}),m=function(e){var t=e.profileImageUrl,n=e.name,a=e.email,i=f();return r.a.createElement("div",{className:i.profileContainer},r.a.createElement("img",{alt:"profile",className:i.profileImage,src:t||""}),r.a.createElement("div",{className:i.profileInfo},r.a.createElement("div",{className:i.userName},n),r.a.createElement("div",{className:i.email},a)))},g=function(e){document.getElementById("google-oauth")&&window.gapi.signin2.render("google-oauth",{scope:"profile email",width:240,height:50,longtitle:!0,theme:"dark",onsuccess:e,onfailure:console.log})},p=function(e){var t=document.createElement("script");t.src="https://apis.google.com/js/platform.js",t.async=!0,t.defer=!0,t.onload=function(){return function(e){window.gapi.load("auth2",(function(){var t=window.gapi.auth2.init({client_id:"125188008804-jppb6eihjsr5agvceeoabiqlsk49tg9a.apps.googleusercontent.com",scope:"profile email"});t.isSignedIn.listen((function(n){n?e(t.currentUser.get()):g(e)})),t.currentUser.listen((function(t){t.getBasicProfile()||g(e)}))}))}(e)},document.body.appendChild(t)},h=function(e){var t=e.user,n=e.callback,a=window.gapi;a&&function(e){return!!(e.hasOwnProperty("name")&&e.hasOwnProperty("email")&&e.hasOwnProperty("profileImageUrl"))}(t)&&a.auth2.getAuthInstance().signOut().then((function(){return n(t)})).catch(console.log)},b=function(e){var t=e.user,n=e.callback;if(function(e){return!(!e.getBasicProfile||!e.isSignedIn)}(t)){var a=t.getBasicProfile();n({isSignedIn:t.isSignedIn(),name:a.getName(),email:a.getEmail(),profileImageUrl:a.getImageUrl()})}},v={minWidth:300,maxWidth:500},j=n(13),w=n.n(j),O=n(3),E=n.n(O),x=n(6);function y(e){return fetch("/users/new",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({userId:e})}).catch(console.log)}function I(e,t){return fetch("/words/claim",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({userId:t,wordId:e})}).then((function(e){return e.json()})).catch(console.log)}function S(e,t){return fetch("/words/unclaim",{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({userId:t,wordId:e})}).then((function(e){return e.json()})).catch(console.log)}var C=function(e,t){switch(t.type){case"SET_USER":return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case"SET_CLAIMED_WORDS":return Object(o.a)(Object(o.a)({},e),{},{claimedWords:t.payload});default:return{}}},k={user:{isSignedIn:!1,name:null,email:null,profileImageUrl:null},claimedWords:[]},N={isSignedIn:!1,name:null,email:null,profileImageUrl:null},W={state:{user:N,claimedWords:[]},handleAuth:function(e){},claimWord:function(e){},unClaimWord:function(e){}};var T=r.a.createContext(W),z=Object(l.a)({authIconButton:{borderRadius:"50%",height:45,width:45,backgroundImage:function(e){return"url(".concat(null!==e&&void 0!==e?e:w.a,")")},backgroundSize:"cover",zIndex:1},authDropdown:Object(u.a)({position:"absolute",top:65,right:30,display:"flex",flexDirection:"column",justifyContent:"center",border:"1px solid black",padding:30,minWidth:250,minHeight:135},"& #".concat("google-oauth"),{margin:"auto"}),authAction:{display:"flex",justifyContent:"center",marginTop:10},signOutButton:{width:100,height:25,margin:5},screen:{width:"100vw",height:"100vh",top:0,left:0,position:"absolute",background:"transparent",zIndex:0}}),B=function(){var e=Object(a.useContext)(T),t=e.state,n=e.handleAuth,i=t.user,c=Object(a.useState)(!1),o=Object(s.a)(c,2),l=o[0],u=o[1],f=z(i.profileImageUrl);Object(a.useEffect)((function(){l&&!i.isSignedIn&&g(n)}),[l,i.isSignedIn,n]),Object(a.useEffect)((function(){return u(!1)}),[i.isSignedIn]);var p=function(e){e.target===e.currentTarget&&u(!l)};return i.isSignedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{role:"button",onClick:p,className:f.authIconButton},l&&r.a.createElement("div",{className:f.authDropdown},i.isSignedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(m,i),r.a.createElement("div",{className:f.authAction},r.a.createElement("button",{className:f.signOutButton,onClick:function(){return n()}},"Sign out"))):r.a.createElement(d,null))),l&&r.a.createElement("div",{className:f.screen,onClick:p})):null},D=Object(l.a)({header:{top:0,left:0,width:"100vw",boxSizing:"border-box",height:80,background:"#ffff",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 30px"},logo:{fontSize:30,fontWeight:"bold"}}),U=function(){var e=D();return r.a.createElement("div",{className:e.header},r.a.createElement("div",{className:e.logo},"Wordful"),r.a.createElement(B,null))},P={padding:"20px 10px 20px 30px",display:"flex",justifyContent:"flex-start",alignItems:"center"},A=Object(l.a)({wordList:Object(o.a)(Object(o.a)({},v),{},{padding:10}),wordContainer:{marginTop:20,border:"1px solid black",display:"flex",flexDirection:"column",height:180},word:Object(o.a)(Object(o.a)({},P),{},{fontSize:30,fontWeight:"bold",background:"#0001",display:"flex",justifyContent:"space-between"}),function:{fontSize:15,fontWeight:"normal",padding:"0px 20px"},definition:Object(o.a)(Object(o.a)({},P),{},{fontSize:15}),deleteButton:{width:50,alignSelf:"flex-end",marginRight:20}}),R=function(e){var t=e.word,n=e.def,i=e.func,c=e.id,o=A(),l=Object(a.useContext)(T).unClaimWord;return r.a.createElement("div",{className:o.wordContainer},r.a.createElement("div",{className:o.word},t,r.a.createElement("div",{className:o.function},i)),r.a.createElement("div",{className:o.definition},n),r.a.createElement("button",{className:o.deleteButton,onClick:function(){return l(c)}},"delete"))},F=function(e){var t=e.words,n=A();return r.a.createElement("div",{className:n.wordList},t.map((function(e,t){return r.a.createElement(R,{id:e.id,word:e.name,def:e.definition,func:e.function,key:"".concat(e,"-").concat(t)})})))},L=Object(l.a)({welcomePage:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingBottom:80},description:{fontSize:30,fontWeight:"bold",textAlign:"center",padding:35,marginTop:100}}),_=function(){var e=L();return r.a.createElement("div",{className:e.welcomePage},r.a.createElement("div",{className:e.description},"Learn new words while having fun"),r.a.createElement(d,null))};function J(e){return fetch("/words?query=".concat(e)).then((function(e){return e.json()})).catch(console.log)}var M=Object(l.a)({result:{display:"flex",justifyContent:"space-between",alignItems:"center"},search:Object(o.a)(Object(o.a)({},v),{},{padding:10}),searchResult:{padding:10},searchInput:{fontSize:15,padding:10,width:"100%",height:40,boxSizing:"border-box"}}),q=function(){var e=M(),t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)({}),l=Object(s.a)(o,2),u=l[0],d=l[1],f=Object(a.useState)(""),m=Object(s.a)(f,2),g=m[0],p=m[1],h=Object(a.useContext)(T),b=h.claimWord,v=h.state.claimedWords,j=function(){var e=Object(x.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,J(g);case 3:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==n;case 7:if(!e.t0){e.next=11;break}e.t2=n,e.next=12;break;case 11:e.t2=[];case 12:a=e.t2,c(a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(Object.keys(v).length!==Object.values(u).filter((function(e){return e})).length){var e={};v.forEach((function(t){e[t.name]=!0})),d(e)}else 0===Object.keys(v).length&&Object.values(u).filter((function(e){return e})).length>0&&d({})}),[v,u]),r.a.createElement("div",{className:e.search},r.a.createElement("form",{onSubmit:j},r.a.createElement("input",{className:e.searchInput,onChange:function(e){return p(e.target.value)},value:g,type:"text",name:"wordSearchInput",placeholder:"Type and enter"})),r.a.createElement("div",{className:e.searchResult},i.map((function(t,n){return r.a.createElement("div",{key:n,className:e.result},t.name,void 0!==u[t.name]?r.a.createElement("div",null,"\u2705"):r.a.createElement("button",{onClick:function(){return b(t.id)}},"Add"))}))))},H=Object(l.a)({"@global":{body:{fontFamily:"Open Sans, sans-serif",top:0,left:0,margin:0,display:"flex",flexDirection:"column",width:"100vw",height:"100vh"},"#root":{width:"100vw",height:"100vh"}},signedInContent:Object(o.a)(Object(o.a)({},v),{},{margin:"auto",paddingBottom:80})}),G=function(){var e=function(){var e=Object(a.useReducer)(C,k),t=Object(s.a)(e,2),n=t[0],r=t[1],i=n.user,c=function(e){(e?b:h)({user:null!==e&&void 0!==e?e:N,callback:function(e){r({type:"SET_USER",payload:e})}})},o=Object(a.useCallback)(Object(x.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=i.email,fetch("/users?id=".concat(n)).then((function(e){return e.json()})).catch(console.log);case 2:t=e.sent,Array.isArray(t)&&0===t.length&&y(i.email);case 4:case"end":return e.stop()}var n}),e)}))),[i.email]),l=Object(a.useCallback)(Object(x.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,n=i.email,fetch("/words/user?id=".concat(n)).then((function(e){return e.json()})).catch(console.log);case 3:if(e.t2=t=e.sent,e.t1=null!==e.t2,!e.t1){e.next=7;break}e.t1=void 0!==t;case 7:if(!e.t1){e.next=11;break}e.t3=t,e.next=12;break;case 11:e.t3=[];case 12:e.t4=e.t3,e.t5={type:"SET_CLAIMED_WORDS",payload:e.t4},(0,e.t0)(e.t5);case 15:case"end":return e.stop()}var n}),e)}))),[i.email]),u=function(){var e=Object(x.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,i.email);case 2:return e.next=4,l();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(x.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,i.email);case 2:return e.next=4,l();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p(c)}),[]),Object(a.useEffect)((function(){i.isSignedIn&&i.email&&(o(),l())}),[i,l,o]),{state:n,handleAuth:c,claimWord:u,unClaimWord:d}}(),t=e.state,n=t.user,i=t.claimedWords,c=H();return r.a.createElement(T.Provider,{value:e},r.a.createElement(U,null),n.isSignedIn?r.a.createElement("div",{className:c.signedInContent},r.a.createElement(q,null),r.a.createElement(F,{words:i})):r.a.createElement(_,null))},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),K()}},[[14,1,2]]]);
//# sourceMappingURL=main.4dd654aa.chunk.js.map